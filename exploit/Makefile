EXPLOIT_INCLUDES := $(shell find ./include -type f -name "*.h")

PWD := $(CURDIR)

OBJS := src/exploit/exploit.o

CC := gcc

exploit: $(shell find ./src/exploit -type f -name "*.c") $(EXPLOIT_INCLUDES) Makefile
	arm make build_exploit

%.o: %.c
	$(CC) -fPIE -c $< -o $@ -I ./include

build_exploit: $(OBJS)
	$(CC) -static $^ -o exploit